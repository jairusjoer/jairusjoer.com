---
import Button from './button.astro';

const { class: className } = Astro.props;

const options = [
  {
    variant: 'bold',
    title: 'hello@jairusjoer.com',
    href: 'mailto:hello@jairusjoer.com',
  },
  {
    variant: 'subtle',
    title: 'LinkedIn',
    href: 'https://linkedin.com/in/jairusjoer',
  },
  {
    variant: 'outline',
    title: 'GitHub',
    href: 'https://github.com/jairusjoer',
  },
];
---

<script>
  const button = document.getElementById('copy-email');

  document.addEventListener('DOMContentLoaded', () => {
    button?.addEventListener('click', copyEmail);
  });

  const copyEmail = async () => {
    if (!button) return;

    try {
      await navigator.clipboard.writeText('hello@jairusjoer.com');
      button.title = 'E-Mail Copied';
      button.textContent = 'âœ…';
    } catch (error) {
      button.title = 'Failed to copy E-Mail';
      button.textContent = 'âŒ';
    } finally {
      setTimeout(() => {
        button.title = 'Copy E-Mail';
        button.textContent = 'ðŸ“‹';
      }, 1500);
    }
  };
</script>

<section class:list={['flex flex-wrap gap-1 font-medium', className]}>
  {
    options.map(({ href, title, variant }) => (
      <Button
        is="a"
        {variant}
        {href}
      >
        {title}
      </Button>
    ))
  }
</section>
